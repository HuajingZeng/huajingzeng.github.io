---
title: 神兵利器之正则表达式
date: 2018-01-02 13:11:10
update: 
author: 曾华经
tags: 正则表达式
categories: 编程基础
thumbnail: /img/thumbnail/4.jpg
blogexcerpt: 
toc: true
---
&emsp;&emsp;正则表达式并不“总要用到”。但当你需要经常处理文本和字符串时，用过它之后，你就会知道它的强大和价值所在，并且深深地爱上它。学会使用正则表达式是非常必要的，即便你所处的开发领域与文本处理没什么关系。否则当到了需要的场合用不上，就会有“一分钱难倒英雄汉”的尴尬了。

<!--more-->

# 简介

## 定义
> 正则表达式是对字符串操作的一种逻辑公式，就是用事先定义好的一些特定字符、及这些特定字符的组合，组成一个“规则字符串”，这个“规则字符串”用来表达对字符串的一种过滤逻辑。


## 用途

- 验证字符串是否匹配模式
- 替换字符串中匹配模式的子字符串
- 从字符串中提取匹配模式的子字符串

# 字符

## 普通字符

普通字符包括没有显式指定为元字符的所有可打印和不可打印字符。这包括所有大写和小写字母、所有数字、所有标点符号和一些其他符号。

## 元字符

所谓特殊字符，就是一些有特殊含义的字符。若要匹配这些特殊字符，必须进行转义（将反斜杠字符&#92;放在它们前面）

### 限定符

限定符用来指定正则表达式的一个给定子表达式必须要出现多少次才能满足匹配。正则表达式的限定符有：

|<div style="white-space: nowrap; word-wrap: normal; word-break: normal;">&emsp;字符&emsp;</div>|描述|
|:---:|---|
|&#42;|匹配前面的子表达式零次或多次。等价于&#123;0,&#125;|
|&#43;|匹配前面的子表达式一次或多次。等价于&#123;1,&#125;|
|&#63;|匹配前面的子表达式零次或一次。等价于&#123;0,1&#125;|
|&#123;n&#125;|n是一个非负整数。匹配确定的n次|
|&#123;n,&#125;|n是一个非负整数。至少匹配n次|
|&#123;n,m&#125;|m和n均为非负整数，其中n<=m。最少匹配n次且最多匹配m次（逗号和两个数之间不能有空格）|

**注意：&#42;、&#43;限定符都是贪婪的，因为它们会尽可能多的匹配文字，只有在它们的后面加上一个?就可以实现非贪婪或最小匹配**

### 定位符

定位符使您能够将正则表达式固定到行首或行尾。它们还使您能够创建这样的正则表达式，这些正则表达式出现在一个单词内、在一个单词的开头或者一个单词的结尾。定位符用来描述字符串或单词的边界，&#94;和&#36;分别指字符串的开始与结束，&#92;b描述单词的前或后边界，&#92;B表示非单词边界。正则表达式的定位符有：

|<div style="white-space: nowrap; word-wrap: normal; word-break: normal;">&emsp;字符&emsp;</div>|描述|
|:---:|---|
|&#94;|匹配输入字符串开始的位置（在方括号表达式中使用时，表示不接受该字符集合）。如果设置了RegExp对象的Multiline属性，&#94;也匹配&#94;n或&#94;r之后的位置。要匹配&#94;字符本身，请使用&#92;&#94;|
|&#36;|匹配输入字符串的结尾位置。如果设置了RegExp对象的Multiline属性，则&#36;也匹配&#92;n或&#92;r之前的位置。要匹配&#36;字符本身，请使用&#92;&#36;|
|&#92;b|匹配一个单词边界，即字与空格间的位置|
|&#92;B|非单词边界匹配|

### 非打印字符

下表列出了表示非打印字符的转义序列：

|<div style="white-space: nowrap; word-wrap: normal; word-break: normal;">&emsp;字符&emsp;</div>|描述|
|:---:|---|
|&#92;cx|匹配由x指明的控制字符。（x的值必须为A-Z或a-z之一。否则将c视为一个原义的'c'字符）|
|&#92;f|匹配一个换页符。等价于&#92;x0c和&#92;cL|
|&#92;n|匹配一个换行符。等价于&#92;x0a和&#92;cJ|
|&#92;r|匹配一个回车符。等价于&#92;x0d和&#92;cM|
|&#92;s|匹配任何空白字符，包括空格、制表符、换页符等等。等价于&#91;&#92;f&#92;n&#92;r&#92;t&#92;v&#93;|
|&#92;S|匹配任何非空白字符。等价于&#91;&#94;&#92;f&#92;n&#92;r&#92;t&#92;v&#93;|
|&#92;t|匹配一个制表符。等价于&#92;x09和&#92;c|
|&#92;v|匹配一个垂直制表符。等价于&#92;x0b和&#92;cK|

### 其他元字符及其上下文行为

|<div style="white-space: nowrap; word-wrap: normal; word-break: normal;">&emsp;&emsp;字符&emsp;&emsp;</div>|描述|
|:---:|---|
|&#46;|匹配除换行符&#92;n、&#92;r之外的任何单字符。要匹配&#46;字符，请使用&#92;&#46;|
|&#40;pattern&#41;|&#40;和&#41;标记一个子表达式的开始和结束位置。子表达式可以获取匹配的内容供以后使用。要匹配&#40;和&#41;字符，请使用&#92;&#40;和&#92;&#41;|
|&#40;&#63;&#58;pattern&#41;|匹配pattern但不获取匹配结果，也就是说这是一个非获取匹配，不进行存储供以后使用|
|&#40;&#63;&#61;pattern&#41;|正向肯定预查（look ahead positive assert），在任何匹配pattern的字符串开始处匹配查找字符串。这是一个非获取匹配，也就是说，该匹配不需要获取供以后使用。预查不消耗字符，也就是说，在一个匹配发生后，在最后一次匹配之后立即开始下一次匹配的搜索，而不是从包含预查的字符之后开始|
|&#40;&#63;&#33;pattern&#41;|正向否定预查(negative assert)，在任何不匹配pattern的字符串开始处匹配查找字符串。这是一个非获取匹配，也就是说，该匹配不需要获取供以后使用。预查不消耗字符，也就是说，在一个匹配发生后，在最后一次匹配之后立即开始下一次匹配的搜索，而不是从包含预查的字符之后开始|
|&#40;&#63;&#60;&#61;pattern&#41;|反向(look behind)肯定预查，与正向肯定预查类似，只是方向相反|
|&#40;&#63;&#60;&#33;pattern&#41;|反向否定预查，与正向否定预查类似，只是方向相反|
|x&#124;y|匹配x或y|
|&#91;xyz&#93;|字符集合。匹配所包含的任意一个字符|
|&#91;&#94;xyz&#93;|负值字符集合。匹配未包含的任意字符|
|&#91;a&#45;z&#93;|字符范围。匹配指定范围内的任意字符|
|&#91;&#94;a&#45;z&#93;|负值字符范围。匹配任何不在指定范围内的任意字符|
|&#92;d|匹配一个数字字符|
|&#92;D|匹配一个非数字字符|
|&#92;w|匹配字母、数字、下划线|
|&#92;W|匹配非字母、数字、下划线|
|&#92;xn|匹配n，其中n为十六进制转义值。十六进制转义值必须为确定的两个数字长|
|&#92;num|匹配num，其中num是一个正整数。对所获取的匹配的引用|
|&#92;n|标识一个八进制转义值或一个向后引用。如果&#92;n之前至少n个获取的子表达式，则n为向后引用。否则，如果n为八进制数字 (0&#45;7)，则n为一个八进制转义值|
|&#92;nm|标识一个八进制转义值或一个向后引用。如果&#92;nm之前至少有nm个获得子表达式，则nm为向后引用。如果&#92;nm之前至少有n个获取，则n为一个后跟文字m的向后引用。如果前面的条件都不满足，若n和m均为八进制数字 (0-7)，则&#92;nm将匹配八进制转义值nm|
|&#92;nl|如果n为八进制数字 (0&#45;3)，且m和l均为八进制数字 (0&#45;7)，则匹配八进制转义值nml|
|&#92;un|匹配n，其中n是一个用四个十六进制数字表示的Unicode字符|

# 运算符优先级

相同优先级的从左到右进行运算，不同优先级的运算先高后低。下表从最高到最低说明了各种正则表达式运算符的优先级顺序：

|<div style="white-space: nowrap; word-wrap: normal; word-break: normal;">&emsp;运算符&emsp;</div>|描述|
|:---:|---|
|&#92;|转义符|
|&#40;&#41;，&#40;&#63;&#58;&#41;，&#40;&#63;&#61;&#41;，&#91;&#93;|圆括号和方括号|
|&#42;，&#43;，&#63;，&#123;n&#125;，&#123;n,&#125;，&#123;n,m&#125;|限定符|
|&#94;，&#36;，&#92;任何元字符，任何字符|定位点和序列（即位置和顺序）|
|&#124;|替换，逻辑“或”操作字符具有高于替换运算符的优先级。|

# 匹配规则

**欢迎转载，转载请注明出处：[曾华经的博客](http://www.huajingzeng.com)**
